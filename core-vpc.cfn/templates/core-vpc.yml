AWSTemplateFormatVersion: "2010-09-09"
Description: Deploys a VPC with public/private subnets and dependencies.

Parameters:
  VPCCidrBlock:
    Description: The cidr block for this VPC
    Type: String
    ConstraintDescription: CIDR block parameter must be in the form x.x.x.x/8-28
    AllowedPattern: ^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([0-1][6-9]|2[0-8]))$^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([0-9]|[1-2][0-9]|3[0-2]))?$

Resources:
  VPC:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: !Ref VPCCidrBlock
      EnableDnsSupport: True
      EnableDnsHostnames: True
      InstanceTenancy: default
      Tags:
        - Key: Name
          Value: core-vpc
        - Key: CFNStackName
          Value: !Ref AWS::StackName
        - Key: CFNStackId
          Value: !Ref AWS::StackId
